@model FinalProject12.Models.Schedule

@{
    ViewData["Title"] = "Details";
}

<style>

    h1 {
        font-size: 36px !important;
        color: #3238a8 !important;
        margin-bottom: 20px !important;
        text-shadow 0 4px 8px rgba(0, 0, 255, 0.2);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Box Shadow */
        padding: 10px; /* Add padding for better shadow visibility */
    }

    .screen-box {
        width: 25%;
        height: 30px;
        background-color: #333;
        position: relative;
        top: 0;
        left: 0;
        z-index: 1;
        text-align: center;
        color: #fff;
        font-weight: bold;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .seating-chart {
        display: inline-block;
        position: relative;
        margin-top: 20px;
    }

        .seating-chart table {
            border-collapse: collapse;
            width: 100%;
        }

        .seating-chart th, .seating-chart td {
            text-align: center;
            height: 30px;
        }

        .seating-chart th {
            background-color: #ddd;
        }

    .seat-number {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-weight: bold;
    }

    .seat {
        display: inline-block;
        width: 50px;
        height: 50px;
        text-align: center;
        line-height: 50px;
        font-size: 16px;
        position: relative;
        margin: 5px;
    }

    .screen-text {
        text-align: center;
        font-weight: bold;
        margin-top: 10px;
    }

    .hidden {
        display: none;
    }

    .btn {
        background-color: #0667A6;
        color: #fff;
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        display: inline-block;
        margin-right: 10px;
    }

    .button-container {
        display: flex;
        justify-content: space-between;
    }


    .form-group input[type="text"],
    .form-group textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #0667A6;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .form-group textarea {
        height: 100px;
    }

    .legend-container {
        margin-top: 10px;
    }

    .legend-item {
        display: inline-block;
        margin-right: 20px;
    }

    .legend-color {
        display: inline-block;
        width: 20px;
        height: 20px;
        margin-right: 5px;
    }

    .legend-container,
    .legend-item {
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        padding: 10px;
        background-color: #fff;
    }
</style>

<h1>Showtime Details</h1>

<div class="container mt-4">
    <!-- Add margin top to the container -->
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">Showtime Details</h4>
            <hr />
            <dl class="row">
                <dt class="col-sm-3">Movie Name:</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.Movie.MovieName)</dd>

                <dt class="col-sm-3">Start Date and Time:</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.StartDateTime)</dd>

                <dt class="col-sm-3">Theater Number:</dt>
                <dd class="col-sm-9">@Html.DisplayFor(model => model.TheaterNumber)</dd>

                <dt class="col-sm-3 hidden">Special Event:</dt>
                <dd class="col-sm-9 hidden">@Html.DisplayFor(model => model.SpecialEvent)</dd>
            </dl>
        </div>
    </div>
</div>



<div class="seating-chart-container">
    <div class="screen-box">Screen</div>
    <div class="seating-chart">
        <table>
            @for (char row = 'A'; row <= 'E'; row++)
            {
                <tr>
                    @for (int col = 1; col <= 5; col++)
                    {
                        <td>
                            @{
                                string seatNumber = $"{row}{col}";
                                bool isSeatTaken = Model.TransactionDetails.Any(td => td.SeatNumber == seatNumber);
                            }

                            <div class="seat" style="background-color: @(isSeatTaken ? "darkgrey" : "lightgrey");">
                                <span class="seat-number">@seatNumber</span>
                            </div>
                        </td>
                    }
                </tr>
            }
        </table>
    </div>
</div>

<div class="button-container">
    <a asp-action="Edit" asp-route-id="@Model?.ScheduleID" class="btn btn-info">Edit</a>
    <a asp-action="Index" class="btn btn-info">Back to List</a>
    <a asp-action="Create" asp-controller="Transactions" class="btn btn-info">Purchase Tickets</a>
</div>

<!-- Seating chart legend -->
<div class="legend-container">
    <div class="legend-item">
        <div class="legend-color" style="background-color: darkgrey;"></div>
        Taken
    </div>
    <div class="legend-item">
        <div class="legend-color" style="background-color: lightgrey;"></div>
        Available
    </div>
</div>